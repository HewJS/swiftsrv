angular.module("sqrtl.adventure",[]).controller("AdventureController",function(a,b,c){a.data=c.dataShift();a.getUber=function(a){console.log("location coords ",a),c.getUber().then(function(a){console.log("redirect URL ",a),b.path(a)})}}),angular.module("sqrtl",["sqrtl.httpRequest","sqrtl.auth","sqrtl.form","sqrtl.adventure","ui.router","ngRoute"]).config(function(a,b){b.when("auth","/auth").otherwise("/form"),a.state("form",{url:"/form",templateUrl:"app/form/form.html",controller:"FormController"}).state("adventure",{url:"/adventure",templateUrl:"app/adventureLand/Adventure.html",controller:"AdventureController"}).state("auth",{url:"/auth",templateUrl:"app/auth/auth.html",controller:"AuthController"})}),angular.module("sqrtl.auth",[]).controller("AuthController",function(a){}),angular.module("sqrtl.form",[]).controller("FormController",function(a,b,c){a.adventure={},a.getLocationAndCategory=function(d,e){c.requestAdventures(d,e).then(function(a){return console.log(a),!0}).then(function(){a.data=c.dataShift()}).then(function(){b.go("adventure")})}}),angular.module("sqrtl.httpRequest",[]).factory("Adventures",function(a){var b=[],c=function(c,d){var e="/api/getYelp";return a({method:"POST",url:e,data:JSON.stringify({term:d,location:c})}).then(function(a){return b=a.data.businesses.map(function(a){return{name:a.name,image:a.image_url.replace(/ms.jpg/i,"o.jpg"),isClosed:a.is_closed,rating:a.rating,ratingImg:a.rating_img_url,reviewCount:a.review_count,snippet:a.snippet,location:a.location}})}).catch(function(a){console.error(a)})},d=function(){return b.shift()},e=function(){return a({method:"GET",url:"/api/getUber"}).then(function(a){return a.data})};return{requestAdventures:c,dataShift:d,getUber:e}});